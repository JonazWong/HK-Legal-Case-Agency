# RSS æ–°èæºå¯¦ä½œç‹€æ…‹å ±å‘Š

**æ—¥æœŸ**: 2026-01-30  
**ç‰ˆæœ¬**: 1.1.0  
**ç‹€æ…‹**: ç”Ÿç”¢ç’°å¢ƒå°±ç·’ï¼ˆéœ€é¡å¤–é…ç½®ï¼‰

---

## ğŸ“‹ ç³»çµ±æ¶æ§‹

### å·²å¯¦ä½œæ¨¡çµ„

1. **[lib/tracking/rss-config.ts](../lib/tracking/rss-config.ts)**
   - RSS ä¾†æºé›†ä¸­é…ç½®
   - æ™‚æ®µæ„ŸçŸ¥å»¶é²ç­–ç•¥ï¼ˆæ·±å¤œ 1s / æ­£å¸¸ 2s / ç¹å¿™ 3sï¼‰
   - å„ªå…ˆç´šç®¡ç†ï¼ˆ1-5 ç´šï¼‰
   - å•Ÿç”¨/åœç”¨é–‹é—œ

2. **[lib/tracking/sources/news.rss.ts](../lib/tracking/sources/news.rss.ts)**
   - çœŸå¯¦ RSS è§£æå™¨
   - æ³•å¾‹é—œéµå­—éæ¿¾ï¼ˆ23+ é—œéµå­—ï¼‰
   - User-Agent è­˜åˆ¥
   - éŒ¯èª¤è™•ç†èˆ‡é™ç´š

3. **[lib/tracking/engine.ts](../lib/tracking/engine.ts)**
   - å¤šä¾†æºå”èª¿å¼•æ“
   - ä¾†æºé–“å»¶é²ï¼ˆ2sï¼‰
   - è³‡æ–™å»é‡ï¼ˆexternalId unique constraintï¼‰
   - upsert é‚è¼¯

4. **[scripts/track-cases.ts](../scripts/track-cases.ts)**
   - ä¸»åŸ·è¡Œè…³æœ¬
   - æ™‚æ®µè³‡è¨Šé¡¯ç¤º
   - çµ±è¨ˆå ±å‘Š

---

## ğŸŒ RSS ä¾†æºç‹€æ…‹

| åç¨± | URL | å„ªå…ˆç´š | ç‹€æ…‹ | å‚™è¨» |
|------|-----|--------|------|------|
| **é¦™æ¸¯01** | `hk01.com/rss/zone/2` | 1 | âŒ 404 | éœ€æ›´æ–° URL |
| **RTHK** | `rthk.hk/.../local.htm` | 1 | âš ï¸ XML éŒ¯èª¤ | Entity ç·¨ç¢¼å•é¡Œ |
| **æ˜å ±å³æ™‚** | `mingpao.com/rss/ins/s00001.xml` | 1 | âœ… å¯ç”¨ | ç›®å‰ç„¡æ³•å¾‹æ–°è |
| **Now æ–°è** | `now.com/rss/home/local` | 2 | âŒ 404 | éœ€æ›´æ–° URL |
| **TVB æ–°è** | `tvb.com/rss/tc/local` | 2 | âŒ 404 | éœ€æ›´æ–° URL |
| **æ˜Ÿå³¶å³æ™‚** | `stheadline.com/...` | 2 | âŒ 404 | éœ€æ›´æ–° URL |
| **æ˜å ±æ¸¯è** | `mingpao.com/rss/pns/s00002.xml` | 3 | âœ… å¯ç”¨ | ç›®å‰ç„¡æ³•å¾‹æ–°è |
| **æ˜Ÿå³¶æ—¥å ±** | `stheadline.com/...` | 3 | âŒ 404 | éœ€æ›´æ–° URL |
| **ç¶“æ¿Ÿæ—¥å ±** | `hket.com/rss/hongkong` | 4 | âŒ 403 | éœ€æ›´æ–° URL/headers |
| **ä¿¡å ±** | `hkej.com/rss/instantnews` | 5 | âŒ 404 | éœ€æ›´æ–° URL |
| **SCMP** | `scmp.com/rss/91/feed` | 5 | â¸ï¸ æœªæ¸¬è©¦ | è‹±æ–‡ä¾†æº |

**æˆåŠŸç‡**: 2/11 (18%) â€” **éœ€è¦ä¿®å¾©**

---

## ğŸ”§ æŠ€è¡“é…ç½®

### Crawler é…ç½®

```typescript
{
  userAgent: 'HK-Legal-Research-Bot/1.0 (Legal Research Purpose; Contact: info@hklegal.com)',
  timeout: 30000,  // 30 ç§’
  delays: {
    busyHours: 3000,    // 09:00-18:00
    normalHours: 2000,  // 06:00-09:00, 18:00-00:00
    nightHours: 1000,   // 00:00-06:00
  },
  concurrency: {
    busyHours: 1,
    normalHours: 2,
    nightHours: 3,
  },
}
```

### è«‹æ±‚ Headers

```typescript
{
  'User-Agent': 'HK-Legal-Research-Bot/1.0...',
  'Accept': 'application/rss+xml, application/xml, text/xml, */*',
  'Accept-Language': 'zh-HK,zh;q=0.9,en;q=0.8',
}
```

---

## âš–ï¸ æ³•å¾‹é—œéµå­—éæ¿¾

**ä¸­æ–‡** (23):  
æ³•é™¢, æ³•å®˜, è£æ±º, åˆ¤åˆ‘, å¯©è¨Š, ä¸Šè¨´, æ§å‘Š, èµ·è¨´, è¢«å‘Š, åŸå‘Š, å¾‹å¸«, å¤§å¾‹å¸«, è¨´è¨Ÿ, åˆ‘äº‹, æ°‘äº‹, çµ‚å¯©, é«˜ç­‰æ³•é™¢, å€åŸŸæ³•é™¢, è£åˆ¤æ³•é™¢, æ³•å¾‹, åˆ¤å›š, ç½°æ¬¾, ä¿é‡‹, æ¡ˆä»¶, å¯©ç†

**è‹±æ–‡** (17):  
court, judge, ruling, sentence, trial, appeal, lawsuit, prosecution, defendant, plaintiff, lawyer, barrister, litigation, criminal, civil, law, legal

**éæ¿¾é‚è¼¯**: æ¨™é¡Œæˆ–å…§å®¹åŒ…å« **ä»»ä¸€** é—œéµå­—å³ç´å…¥

---

## ğŸ“Š è³‡æ–™åº«æ¶æ§‹

### PublicCase Model

```prisma
model PublicCase {
  id            Int       @id @default(autoincrement())
  source        String    // "JUDICIARY" | "NewsRSS" | "HKLII"
  externalId    String    // å¿…å¡«ï¼Œä¾†æºç³»çµ±çš„å”¯ä¸€ ID
  caseNumber    String?   // æ¡ˆä»¶ç·¨è™Ÿï¼ˆå¦‚ HCAL 123/2024ï¼‰
  title         String
  content       String?
  category      String?
  court         String?
  judge         String?
  hearingDate   DateTime?
  publishedAt   DateTime  @default(now())
  url           String?
  tags          String?   // é€—è™Ÿåˆ†éš”
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@unique([source, externalId])  // é˜²æ­¢é‡è¤‡
  @@index([source])
  @@index([publishedAt])
  @@index([caseNumber])
}
```

**é—œéµè¨­è¨ˆ**:
- `externalId` **å¿…å¡«**ï¼ˆå·²ä¿®æ­£ NULL å•é¡Œï¼‰
- Unique constraint ç¢ºä¿åŒä¸€ä¾†æºçš„åŒä¸€ ID ä¸é‡è¤‡
- RSS è§£ææ™‚å„ªå…ˆä½¿ç”¨ `item.guid` â†’ `item.link` â†’ ç”Ÿæˆ ID

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. åŸ·è¡Œè¿½è¹¤

```bash
# æ‰‹å‹•åŸ·è¡Œ
npx tsx scripts/track-cases.ts

# GitHub Actions è‡ªå‹•åŸ·è¡Œï¼ˆéœ€é…ç½® DATABASE_URL secretï¼‰
# æ¯æ—¥ UTC 01:00 (HKT 09:00) è‡ªå‹•åŸ·è¡Œ
```

### 2. æª¢è¦–çµæœ

```bash
# æŸ¥è©¢è³‡æ–™åº«
npx tsx scripts/check-db.ts

# æˆ–é€éå‰ç«¯
# http://localhost:3000/public-search
```

### 3. èª¿æ•´é…ç½®

ä¿®æ”¹ [lib/tracking/rss-config.ts](../lib/tracking/rss-config.ts):

```typescript
{
  name: 'è‡ªè¨‚ä¾†æº',
  url: 'https://example.com/rss',
  priority: 2,
  enabled: true,  // æ”¹ç‚º false å¯åœç”¨
  category: 'instant',
  updateFrequency: 'å³æ™‚',
}
```

---

## âš ï¸ å·²çŸ¥å•é¡Œ

### 1. RSS ä¾†æºå¤±æ•ˆ (8/11)
- **åŸå› **: å¤šæ•¸é¦™æ¸¯åª’é«”çš„ RSS ç«¯é»å·²è®Šæ›´æˆ–é—œé–‰
- **å½±éŸ¿**: ç›®å‰åƒ… 2 å€‹ä¾†æºå¯è¨ªå•ï¼ˆæ˜å ± 2 å€‹ç«¯é»ï¼‰
- **å»ºè­°**: 
  - æ‰‹å‹•æ¸¬è©¦æ¯å€‹ä¾†æºï¼Œæ›´æ–° URL
  - è€ƒæ…®å‚™ç”¨ä¾†æºï¼ˆå¦‚å®˜æ–¹ APIã€ç¶²é çˆ¬èŸ²ï¼‰
  - åƒè€ƒ [é€™ä»½æŒ‡å—](./æ¸¯èæ–°èæºåˆ°æ³•å¾‹è³‡è¨Šæœå°‹æ–¹æ³•åŠæ³¨æ„äº‹é …æŒ‡å—.md) æ›´æ–°ä¾†æº

### 2. RTHK XML ç·¨ç¢¼éŒ¯èª¤
- **éŒ¯èª¤**: `Invalid character in entity name (Line 142)`
- **åŸå› **: XML ä¸­æœ‰æœªæ­£ç¢ºè½‰ç¾©çš„ `&` å­—å…ƒ
- **æš«æ™‚è§£æ±º**: åœç”¨è©²ä¾†æºæˆ–ä½¿ç”¨å…¶ä»–ç«¯é»

### 3. æ³•å¾‹æ–°èè¦†è“‹ä¸è¶³
- **è§€å¯Ÿ**: å³ä½¿ RSS å¯ç”¨ï¼Œæ³•å¾‹ç›¸é—œæ–°èè¼ƒå°‘
- **å»ºè­°**: 
  - æ“´å±•é—œéµå­—åˆ—è¡¨ï¼ˆåŠ å…¥ã€Œå»‰ç½²ã€ã€Œæµ·é—œã€ã€Œè­¦æ–¹ã€ç­‰ï¼‰
  - è€ƒæ…®æ³•å¾‹å°ˆæ¥­åª’é«”ï¼ˆå¦‚æ³•å¾‹é›œèªŒ RSSï¼‰
  - å¯¦ä½œçœŸå¯¦å¸æ³•æ©Ÿæ§‹çˆ¬èŸ²ï¼ˆç›®å‰ç‚ºæ¨¡æ“¬è³‡æ–™ï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡Œå‹•

### å„ªå…ˆç´š 1 (ç·Šæ€¥)
- [ ] **ä¿®å¾© RSS ä¾†æº**: é€ä¸€æ¸¬è©¦ä¸¦æ›´æ–° 8 å€‹å¤±æ•ˆ URL
- [ ] **å¯¦ä½œé‡è©¦æ©Ÿåˆ¶**: `CRAWLER_CONFIG.retry` å·²å®šç¾©ä½†æœªä½¿ç”¨
- [ ] **æ”¹å–„éŒ¯èª¤è™•ç†**: RTHK XML éŒ¯èª¤éœ€å®¹éŒ¯è§£æ

### å„ªå…ˆç´š 2 (é‡è¦)
- [ ] **åŠ å…¥çœŸå¯¦å¸æ³•è³‡æ–™**: ç›®å‰ Judiciary ä¾†æºç‚ºæ¨¡æ“¬è³‡æ–™
- [ ] **æ¡ˆä»¶ç·¨è™Ÿè§£æ**: å¾æ–°èæ–‡æœ¬æå– HCAL/FACV ç­‰æ¡ˆè™Ÿ
- [ ] **GitHub Actions é…ç½®**: è¨­å®š `DATABASE_URL` secret

### å„ªå…ˆç´š 3 (æ”¹é€²)
- [ ] **æ“´å±•é—œéµå­—**: åŠ å…¥æ›´å¤šæ³•å¾‹ç›¸é—œè©å½™
- [ ] **ä¾†æºæ•ˆèƒ½ç›£æ§**: è¨˜éŒ„æ¯å€‹ä¾†æºçš„æˆåŠŸç‡
- [ ] **è³‡æ–™å“è³ªæª¢æŸ¥**: éæ¿¾ä½å“è³ª/ç„¡é—œå…§å®¹

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- [æ¸¯èæ–°èæºåˆ°æ³•å¾‹è³‡è¨Šæœå°‹æ–¹æ³•åŠæ³¨æ„äº‹é …æŒ‡å—](./æ¸¯èæ–°èæºåˆ°æ³•å¾‹è³‡è¨Šæœå°‹æ–¹æ³•åŠæ³¨æ„äº‹é …æŒ‡å—.md)
- [æ³•å¾‹åˆè¦è²æ˜](./DISCLAIMER.md)
- [ç³»çµ±ç‹€æ…‹å ±å‘Š](./SYSTEM_STATUS.md)
- [GitHub Actions è¨­å®š](./GITHUB_ACTIONS_SETUP.md)

---

## ğŸ”’ æ³•å¾‹èˆ‡é“å¾·è²æ˜

**âš ï¸ é‡è¦**: æœ¬ç³»çµ±åƒ…ä¾›ç ”ç©¶èˆ‡æ¸¬è©¦ç”¨é€”

1. **è³‡æ–™ä¾†æº**:
   - **çœŸå¯¦æ–°è RSS**: å·²å¯¦ä½œä½†è¦†è“‹æœ‰é™
   - **æ¨¡æ“¬å¸æ³•è³‡æ–™**: JUDICIARY ä¾†æºç‚ºæ¸¬è©¦è³‡æ–™
   - **éå®˜æ–¹æ³•å¾‹è³‡æ–™åº«**: ä¸æ‡‰è¦–ç‚ºæ­£å¼æ³•å¾‹æ–‡ä»¶

2. **ç¦æ­¢ç”¨é€”**:
   - âŒ ä½œç‚ºæ³•å¾‹æ„è¦‹ä¾æ“š
   - âŒ æ›¿ä»£å°ˆæ¥­å¾‹å¸«è«®è©¢
   - âŒ æ–¼æ³•åº­æˆ–æ­£å¼æ–‡ä»¶å¼•ç”¨

3. **ç”Ÿç”¢ç’°å¢ƒè¦æ±‚**:
   - âœ… å¿…é ˆå¯¦ä½œçœŸå¯¦å¸æ³•æ©Ÿæ§‹è³‡æ–™ä¾†æº
   - âœ… å¿…é ˆåŠ å…¥è³‡æ–™é©—è­‰èˆ‡äº¤å‰æ ¸å°æ©Ÿåˆ¶
   - âœ… å¿…é ˆç”±æ³•å¾‹å°ˆæ¥­äººå£«å¯©æ ¸è³‡æ–™æº–ç¢ºæ€§
   - âœ… å¿…é ˆéµå®ˆã€Šå€‹äººè³‡æ–™ï¼ˆç§éš±ï¼‰æ¢ä¾‹ã€‹

---

**æœ€å¾Œæ›´æ–°**: 2026-01-30 00:32 (HKT)  
**ç¶­è­·è€…**: HK Legal Case Agency Team
