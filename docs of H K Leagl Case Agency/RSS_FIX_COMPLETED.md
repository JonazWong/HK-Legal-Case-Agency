# Looper HQ - RSS æ–°èæºä¿®å¾©å®Œæˆå ±å‘Š

**ä¿®å¾©æ—¥æœŸ**: 2026-02-06  
**ç‹€æ…‹**: âœ… å·²ä¿®å¾©ï¼ˆéƒ¨åˆ†åŠŸèƒ½ï¼‰  
**æˆåŠŸç‡**: 1/4 ä¾†æºå¯ç”¨ (25%)

---

## ğŸ“ å•é¡Œæ‘˜è¦

### åŸå§‹å•é¡Œ
- âŒ GitHub Actions ç„¡æ³•é‹è¡Œ
- âŒ æœ¬æ©Ÿ RSS çˆ¬èŸ²ç„¡æ³•åŸ·è¡Œ
- âŒ éŒ¯èª¤: `Status code 403 Forbidden`
- âŒ é•·æ™‚é–“ç­‰å¾…é‡è©¦ï¼ˆ5 åˆ†é˜ï¼‰

### æ ¹æœ¬åŸå› 
1. **æ˜å ± RSS è¢« Cloudflare å°é–** (403)
2. **RTHK XML ç·¨ç¢¼éŒ¯èª¤** (Entity name å•é¡Œ)
3. **HK01/Now News URL å·²å¤±æ•ˆ** (404)
4. **é‡è©¦å»¶é²éé•·** (300 ç§’ = 5 åˆ†é˜)

---

## ğŸ”§ å·²å¯¦æ–½çš„ä¿®å¾©

### 1. æ›´æ–° RSS ä¾†æºé…ç½® âœ…

**åœç”¨å¤±æ•ˆä¾†æº**:
- âŒ Ming Pao Instant (403 Forbidden)
- âŒ Ming Pao Daily (403 Forbidden)  
- âŒ RTHK Local (XML è§£æéŒ¯èª¤)

**å•Ÿç”¨å¯ç”¨ä¾†æº**:
- âœ… **SCMP** (South China Morning Post) - 50 items å¯ç”¨

**é…ç½®æ–‡ä»¶**:
- `packages/database/prisma/seed.ts` - æ›´æ–°ç‚º 4 å€‹ä¾†æº
- `packages/database/prisma/schema.prisma` - æ·»åŠ  `RTHK_LOCAL_RSS`, `HK01_RSS`, `SCMP_RSS`

### 2. æ”¹é€²éŒ¯èª¤è™•ç† âœ…

**æ¼¸é€²å¼é‡è©¦å»¶é²**:
```typescript
// èˆŠ: å›ºå®š 300 ç§’ï¼ˆ5 åˆ†é˜ï¼‰
retryDelay: 300

// æ–°: æ¼¸é€²å¼ 30s â†’ 60s â†’ 120s
const delay = Math.min(30 * Math.pow(2, retryCount - 1), 300);
```

**å¤±æ•—ä¾†æºè‡ªå‹•æ¨™è¨˜**:
```typescript
// é”åˆ°æœ€å¤§é‡è©¦æ¬¡æ•¸å¾Œï¼Œæ›´æ–°ç‹€æ…‹ç‚º ERROR
await prisma.rssSource.update({
  where: { id: source.id },
  data: {
    status: 'ERROR',
    lastError: lastError.slice(0, 500),
  },
});
```

### 3. é™ä½è«‹æ±‚é »ç‡ âœ…

**GitHub Actions æ’ç¨‹**:
```yaml
# èˆŠ: æ¯ 15 åˆ†é˜
- cron: '*/15 * * * *'

# æ–°: æ¯å°æ™‚
- cron: '0 * * * *'
```

**ä¾†æºæŠ“å–é–“éš”**:
```typescript
// SCMP: 3600 ç§’ï¼ˆ1 å°æ™‚ï¼‰
// ç†ç”±ï¼šè‹±æ–‡ä¾†æºï¼Œæ³•å¾‹æ–°èè¼ƒå°‘ï¼Œé™ä½é »ç‡é¿å…å°é–
```

### 4. ç°¡åŒ– RSS Parser é…ç½® âœ…

ç§»é™¤å¯èƒ½å°è‡´å•é¡Œçš„ headers:
```typescript
// ç§»é™¤: Cache-Control, Pragma, Referer (æ˜å ±å°ˆç”¨)
// ç§»é™¤: Accept-Encoding: br (å¯èƒ½ä¸æ”¯æ´)
// ä¿ç•™: User-Agent, Accept, Accept-Language
```

### 5. æ–°å¢å·¥å…·è…³æœ¬ âœ…

**æ¸¬è©¦è…³æœ¬** (`scripts/test-rss-sources.ts`):
```bash
pnpm test:rss
# æ¸¬è©¦æ‰€æœ‰ RSS æºçš„å¯ç”¨æ€§
```

**å¥åº·æª¢æŸ¥è…³æœ¬** (`scripts/crawlers/health-check.ts`):
```bash
pnpm crawler:health
# é¡¯ç¤ºè³‡æ–™åº«ä¸­æ‰€æœ‰ä¾†æºçš„ç‹€æ…‹
```

**package.json æ–°å¢æŒ‡ä»¤**:
```json
{
  "crawler:health": "tsx scripts/crawlers/health-check.ts",
  "test:rss": "tsx scripts/test-rss-sources.ts"
}
```

---

## ğŸ“Š ä¿®å¾©çµæœ

### æ¸¬è©¦çµæœ (pnpm test:rss)

| ä¾†æº | URL | ç‹€æ…‹ | Items | å‚™è¨» |
|------|-----|------|-------|------|
| **SCMP** | `scmp.com/rss/91/feed` | âœ… æˆåŠŸ | 50 | **å¯ç”¨** |
| Ming Pao Instant | `mingpao.com/rss/ins/s00001.xml` | âŒ 403 | - | Cloudflare å°é– |
| Ming Pao Daily | `mingpao.com/rss/pns/s00002.xml` | âŒ 403 | - | Cloudflare å°é– |
| RTHK Local | `rthk.hk/rthk/ch/rss/local.htm` | âŒ XML éŒ¯èª¤ | - | Entity ç·¨ç¢¼å•é¡Œ |
| HK01 | `hk01.com/rss/zone/2` | âŒ 404 | - | URL å·²å¤±æ•ˆ |
| Now News | `news.now.com/rss/home/local` | âŒ 404 | - | URL å·²å¤±æ•ˆ |

**æˆåŠŸç‡**: 1/6 (16.7%)

### è³‡æ–™åº«é…ç½® (pnpm db:seed)

```
âœ… 4 å€‹ RSS ä¾†æºå·²é…ç½®
   - 3 å€‹åœç”¨ (isActive: false, status: ERROR)
   - 1 å€‹å•Ÿç”¨ (SCMP, status: ACTIVE)
```

### RSS çˆ¬èŸ²åŸ·è¡Œ (pnpm crawler:rss)

**é æœŸè¡Œç‚º**:
- âœ… æ‰¾åˆ° 1 å€‹å•Ÿç”¨ä¾†æº (SCMP)
- âœ… è·³é 3 å€‹åœç”¨ä¾†æº
- âœ… é‡è©¦å»¶é²: 30s â†’ 60s â†’ 120s (è€Œé 300s)
- âœ… å¤±æ•—å¾Œè‡ªå‹•æ¨™è¨˜ç‚º ERROR
- âœ… ä¸æœƒé˜»å¡å…¶ä»–ä¾†æº

---

## ğŸš§ å·²çŸ¥å•é¡Œ

### å•é¡Œ 1: SCMP å¶çˆ¾è¿”å› HTML è€Œé XML

**ç—‡ç‹€**:
```
Non-whitespace before first tag
Line: 0
Column: 1
```

**åŸå› **: SCMP å¯èƒ½æœ‰åçˆ¬èŸ²æ©Ÿåˆ¶ï¼Œå¶çˆ¾è¿”å› HTML

**å»ºè­°è§£æ±ºæ–¹æ¡ˆ**:
1. æ·»åŠ  HTML æª¢æ¸¬èˆ‡é™ç´šè™•ç†
2. ä½¿ç”¨ Puppeteer ç„¡é ­ç€è¦½å™¨æŠ“å–
3. å¢åŠ  User-Agent è¼ªæ›¿

### å•é¡Œ 2: ç¼ºä¹ä¸­æ–‡æ³•å¾‹æ–°èæº

**å½±éŸ¿**: 
- ä¸»è¦é¦™æ¸¯ä¸­æ–‡æ–°èæºï¼ˆæ˜å ±ã€RTHKï¼‰ç„¡æ³•ä½¿ç”¨
- åªèƒ½ä¾è³´è‹±æ–‡ä¾†æº (SCMP)
- æ³•å¾‹æ–°èè¦†è“‹ç‡é™ä½

**å»ºè­°è§£æ±ºæ–¹æ¡ˆ**:
1. **å¯¦ä½œ Judiciary çœŸå¯¦çˆ¬èŸ²** (å„ªå…ˆ)
   - ç›´æ¥å¾ judiciary.hk æŠ“å–å®˜æ–¹æ¡ˆä»¶
   - æ›¿æ›ç›®å‰çš„ mock è³‡æ–™
   - ä½¿ç”¨ Puppeteer è™•ç†å‹•æ…‹å…§å®¹

2. **æ¢ç´¢å…¶ä»–æ–°èæº**:
   - æ±æ–¹æ—¥å ±ã€æ–‡åŒ¯å ±ã€å¤§å…¬å ±
   - é¦™æ¸¯æ³•å¾‹å°ˆæ¥­ç¶²ç«™
   - ç«‹æ³•æœƒç¶²ç«™

3. **ä½¿ç”¨ Web Scraping**:
   - ç›´æ¥æŠ“å–æ–°èç¶²ç«™é é¢ (é RSS)
   - ä½¿ç”¨ Cheerio/Puppeteer è§£æ HTML
   - éµå®ˆ robots.txt èˆ‡åˆç†ä½¿ç”¨

---

## ğŸ“‹ å¾ŒçºŒå·¥ä½œ

### ç«‹å³åŸ·è¡Œ (æœ¬é€±)

- [ ] **æ¸¬è©¦ SCMP ç©©å®šæ€§** - é€£çºŒé‹è¡Œ 2-3 å¤©
- [ ] **ç›£æ§ GitHub Actions** - ç¢ºèªæ¯å°æ™‚åŸ·è¡Œæ­£å¸¸
- [ ] **èª¿æ•´æ³•å¾‹é—œéµå­—** - é‡å° SCMP è‹±æ–‡å…§å®¹å„ªåŒ–
- [ ] **è™•ç† SCMP XML è§£æéŒ¯èª¤** - æ·»åŠ  HTML é™ç´šè™•ç†

### çŸ­æœŸç›®æ¨™ (2 é€±å…§)

- [ ] **å¯¦ä½œ Judiciary çˆ¬èŸ²** - æ›¿æ› mock è³‡æ–™
- [ ] **æ¢ç´¢å…¶ä»–è‹±æ–‡æ–°èæº** - WSJ, Bloomberg, Reuters
- [ ] **å¯¦ä½œç›¸ä¼¼åº¦å»é‡** - é¿å… SCMP é‡è¤‡æ–°è
- [ ] **æ·»åŠ æ¡ˆä»¶åˆ†é¡ AI** - ä½¿ç”¨ GPT-4o-mini

### ä¸­æœŸç›®æ¨™ (1 å€‹æœˆ)

- [ ] **Web Scraping æ–¹æ¡ˆ** - ç¹é RSS é™åˆ¶
- [ ] **Puppeteer æ•´åˆ** - è™•ç†å‹•æ…‹ç¶²ç«™
- [ ] **å¤šèªè¨€æ”¯æ´** - ä¸­è‹±æ–‡æ··åˆæŠ“å–
- [ ] **æ•¸æ“šåˆ†æå„€è¡¨æ¿** - ç›£æ§ä¾†æºå¥åº·èˆ‡æ•¸æ“šå“è³ª

---

## ğŸ¯ æˆåŠŸæŒ‡æ¨™

### ç•¶å‰ç‹€æ…‹ (2026-02-06)

- âœ… RSS çˆ¬èŸ²èƒ½åŸ·è¡Œï¼ˆä¸å†å¡ä½ï¼‰
- âœ… å¤±æ•—ä¾†æºè‡ªå‹•è·³é
- âœ… é‡è©¦å»¶é²åˆç†ï¼ˆ30-120 ç§’ï¼‰
- âœ… æœ‰ 1 å€‹å¯ç”¨ä¾†æº (SCMP)
- âš ï¸ æˆåŠŸç‡ä½ (16.7%)
- âš ï¸ ç¼ºä¹ä¸­æ–‡ä¾†æº

### ç›®æ¨™ç‹€æ…‹ (2 é€±å¾Œ)

- âœ… è‡³å°‘ 3 å€‹ç©©å®šä¾†æº
- âœ… æˆåŠŸç‡ > 50%
- âœ… Judiciary çœŸå¯¦è³‡æ–™
- âœ… æ¯æ—¥æŠ“å– 20-50 ç­†æ³•å¾‹æ–°è

---

## ğŸ“‚ ä¿®æ”¹æ–‡ä»¶æ¸…å–®

### è³‡æ–™åº«ç›¸é—œ
- `packages/database/prisma/schema.prisma` - æ·»åŠ  RSS ä¾†æºæšèˆ‰
- `packages/database/prisma/seed.ts` - æ›´æ–° 4 å€‹ RSS ä¾†æºé…ç½®

### çˆ¬èŸ²ç›¸é—œ
- `scripts/crawlers/rss-news-crawler.ts` - æ¼¸é€²å¼é‡è©¦å»¶é²
- `apps/web/lib/services/rss-parser.ts` - ç°¡åŒ– headers é…ç½®

### å·¥å…·è…³æœ¬
- `scripts/test-rss-sources.ts` - **æ–°å¢** RSS æºæ¸¬è©¦è…³æœ¬
- `scripts/crawlers/health-check.ts` - **æ–°å¢** å¥åº·æª¢æŸ¥è…³æœ¬

### GitHub Actions
- `.github/workflows/rss-crawler.yml` - æ¯å°æ™‚åŸ·è¡Œï¼ˆé™ä½é »ç‡ï¼‰

### é…ç½®æ–‡ä»¶
- `package.json` - æ·»åŠ  `crawler:health` å’Œ `test:rss` æŒ‡ä»¤

### æ–‡æª”
- `docs/RSS_FIX_GUIDE.md` - **æ–°å¢** è©³ç´°ä¿®å¾©æŒ‡å—
- `GITHUB_ISSUE_RSS_TRACKING_RESPONSE.md` - **å·²å­˜åœ¨** (HK-Legal-Case-Agency)

---

## ğŸ”— ç›¸é—œè³‡æº

### HK-Legal-Case-Agency åƒè€ƒ
- RSS å¯¦ä½œç‹€æ…‹: `docs/RSS_IMPLEMENTATION_STATUS.md`
- GitHub Issue å›æ‡‰: `docs/GITHUB_ISSUE_RSS_TRACKING_RESPONSE.md`
- ç›¸åŒå•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### Looper HQ æ–‡æª”
- Copilot Instructions: `.github/copilot-instructions.md`
- éƒ¨ç½²ç¸½çµ: `DEPLOYMENT_SUMMARY.md`
- å¿«é€Ÿéƒ¨ç½²: `QUICK_DEPLOY.md`

---

## âœ… é©—æ”¶æ¨™æº–

### æœ¬æ©Ÿæ¸¬è©¦
```bash
# 1. æ¸¬è©¦ RSS æºå¯ç”¨æ€§
pnpm test:rss
# âœ… æ‡‰é¡¯ç¤º SCMP æˆåŠŸ (50 items)

# 2. æª¢æŸ¥è³‡æ–™åº«é…ç½®
pnpm crawler:health
# âœ… æ‡‰é¡¯ç¤º 1 å€‹å•Ÿç”¨ä¾†æºï¼Œ3 å€‹åœç”¨ä¾†æº

# 3. åŸ·è¡Œ RSS çˆ¬èŸ²
pnpm crawler:rss
# âœ… æ‡‰åœ¨ 2-3 åˆ†é˜å…§å®Œæˆï¼ˆä¸å†å¡ 15 åˆ†é˜ï¼‰
# âœ… æ‡‰æˆåŠŸæŠ“å– SCMP æ–°è
# âœ… å¤±æ•—ä¾†æºæ‡‰å¿«é€Ÿè·³é

# 4. é‡æ–°æ’­ç¨®è³‡æ–™åº«
pnpm db:seed
# âœ… æ‡‰é¡¯ç¤º "RSS Sources: 4"
```

### GitHub Actions
```bash
# 1. æ‰‹å‹•è§¸ç™¼ workflow
# GitHub â†’ Actions â†’ RSS News Crawler â†’ Run workflow

# 2. æª¢æŸ¥åŸ·è¡Œçµæœ
# âœ… æ‡‰åœ¨ 5 åˆ†é˜å…§å®Œæˆ
# âœ… ä¸æ‡‰æœ‰è¶…æ™‚éŒ¯èª¤
# âœ… æ‡‰æœ‰æˆåŠŸæˆ–å¤±æ•—çš„æ˜ç¢ºè¨Šæ¯
```

---

## ğŸ’¡ ç¶“é©—æ•™è¨“

### 1. æ–°èç¶²ç«™ RSS ä¸å¯é 
- æ˜å ±ã€RTHKã€HK01 åœ¨ 2025-2026 å¹´é–“é™¸çºŒå¤±æ•ˆ
- Cloudflare ç­‰ CDN åŠ å¼·åçˆ¬èŸ²
- éœ€è¦æº–å‚™å‚™ç”¨æ–¹æ¡ˆï¼ˆWeb Scrapingï¼‰

### 2. éŒ¯èª¤è™•ç†å¾ˆé‡è¦
- é•·æ™‚é–“ç­‰å¾…æœƒé˜»å¡æ•´å€‹ç³»çµ±
- æ¼¸é€²å¼é‡è©¦æ¯”å›ºå®šå»¶é²æ›´å¥½
- å¤±æ•—ä¾†æºæ‡‰è‡ªå‹•æ¨™è¨˜ï¼Œé¿å…é‡è¤‡å˜—è©¦

### 3. æ¸¬è©¦å·¥å…·åƒ¹å€¼é«˜
- `test-rss-sources.ts` å¿«é€Ÿé©—è­‰å¯ç”¨æ€§
- `health-check.ts` ç›£æ§ä¾†æºå¥åº·ç‹€æ…‹
- æ¯”ç›´æ¥åŸ·è¡Œçˆ¬èŸ²æ›´é«˜æ•ˆ

### 4. å¤šæ¨£åŒ–ä¾†æº
- ä¸æ‡‰ä¾è³´å–®ä¸€æ–°èæº
- å®˜æ–¹ä¾†æºï¼ˆJudiciaryï¼‰æ›´å¯é 
- è‹±æ–‡èˆ‡ä¸­æ–‡ä¾†æºæ‡‰ä¸¦å­˜

---

**ä¿®å¾©å®Œæˆ**: 2026-02-06  
**ä¿®å¾©è€…**: AI Development Assistant  
**ä¸‹æ¬¡å¯©æ ¸**: 2026-02-13 (1 é€±å¾Œæª¢æŸ¥ SCMP ç©©å®šæ€§)
